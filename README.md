# Smart Gyroball - Система мониторинга скорости и калорий

Проект для мониторинга скорости вращения гиробола (тренажера для кистей) с подсчетом калорий. Включает в себя:
- Отправитель (publisher) случайных значений скорости
- Получатель (subscriber) значений скорости
- GUI приложение с графиками и статистикой
- Подсчет калорий на основе скорости и времени тренировки

## Требования

- Python 3.x
- Make
- MQTT брокер (например, Mosquitto)

## Установка

1. Создание и активация виртуального окружения:
```bash
make setup
```

## Использование

1. Запуск MQTT серввера
```bash
./server/start_mqtt.sh
```

2. Запуск программ:
  - Запуск отправителя:
     ```bash
     make run-publisher
     ```
  - Запуск получателя:
     ```bash
     make run-subscriber
     ```
  - Запуск GUI:
     ```bash
     make run-gui
     ```
  - Настройка веса для расчета калорий:
     ```bash
     python gui/weight_settings.py
     ```
  - Тестирование расчета калорий:
     ```bash
     make test-advanced-calories
     ```
  - Запуск системы авторизации:
     ```bash
     make run-auth
     ```

## Функциональность

### Система пользователей
- **Регистрация** новых пользователей с указанием имени, веса, роста, возраста и пола
- **Авторизация** существующих пользователей
- **Безопасное хранение** паролей (хеширование SHA-256)
- **Смена пользователя** во время работы приложения

### Улучшенный подсчет калорий
Приложение рассчитывает калории на основе:
- **Скорости вращения гиробола** (определяет интенсивность нагрузки)
- **Времени тренировки** 
- **Веса пользователя** (из профиля)
- **Роста пользователя** (влияет на базовый метаболизм)
- **Возраста пользователя** (влияет на базовый метаболизм)
- **Пол пользователя** (разные формулы для мужчин и женщин)

**Улучшенная формула расчета:**
- Базовый метаболизм (BMR) по формуле Миффлина-Сан Жеора
- Калории = (BMR × MET × Время_в_часах) / 24

**Уровни интенсивности (MET):**
- Низкая скорость (0-30): 2.0 MET (легкая нагрузка)
- Средняя скорость (30-70): 4.0 MET (умеренная нагрузка)  
- Высокая скорость (70+): 6.0 MET (интенсивная нагрузка)

### Статистика
- Сохранение всех тренировок с данными о скорости и калориях
- Привязка тренировок к конкретным пользователям
- Графики прогресса по времени
- Таблица статистики с колонками: Дата, Пользователь, Длительность, Макс. скорость, Средняя скорость, Калории, Калории/мин, Вес

3. Очистка проекта:
```bash
make clean
```
